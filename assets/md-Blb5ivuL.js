import{d as Mt,r as Ot,J as Dt,f as kt,o as At,b as zt,w as bt,g as yt,e as xt,v as Bt,x as Pt,B as Ct}from"./modules/vue-CIQenf7z.js";import{u as $t,f as qt}from"./slidev/context-ClcKQkSz.js";import{g as It}from"./modules/file-saver-C8BEGaqa.js";import{_ as Et}from"./two-cols.vue_vue_type_script_setup_true_lang-Dhgc9zP0.js";import"./index-BfRzrU9K.js";import"./modules/shiki-CgdO8yf4.js";var vt={exports:{}},jt=vt.exports,St;function Rt(){return St||(St=1,function(gt,lt){(function(nt,J){gt.exports=J()})(jt,()=>(()=>{var nt={873:(R,L)=>{var F,ft,st=function(){var W=function(t,r){var i=t,e=et[r],o=null,s=0,a=null,u=[],c={},w=function(h,g){o=function(d){for(var l=new Array(d),f=0;f<d;f+=1){l[f]=new Array(d);for(var _=0;_<d;_+=1)l[f][_]=null}return l}(s=4*i+17),p(0,0),p(s-7,0),p(0,s-7),y(),v(),m(h,g),i>=7&&k(h),a==null&&(a=O(i,e,u)),B(a,g)},p=function(h,g){for(var d=-1;d<=7;d+=1)if(!(h+d<=-1||s<=h+d))for(var l=-1;l<=7;l+=1)g+l<=-1||s<=g+l||(o[h+d][g+l]=0<=d&&d<=6&&(l==0||l==6)||0<=l&&l<=6&&(d==0||d==6)||2<=d&&d<=4&&2<=l&&l<=4)},v=function(){for(var h=8;h<s-8;h+=1)o[h][6]==null&&(o[h][6]=h%2==0);for(var g=8;g<s-8;g+=1)o[6][g]==null&&(o[6][g]=g%2==0)},y=function(){for(var h=H.getPatternPosition(i),g=0;g<h.length;g+=1)for(var d=0;d<h.length;d+=1){var l=h[g],f=h[d];if(o[l][f]==null)for(var _=-2;_<=2;_+=1)for(var S=-2;S<=2;S+=1)o[l+_][f+S]=_==-2||_==2||S==-2||S==2||_==0&&S==0}},k=function(h){for(var g=H.getBCHTypeNumber(i),d=0;d<18;d+=1){var l=!h&&(g>>d&1)==1;o[Math.floor(d/3)][d%3+s-8-3]=l}for(d=0;d<18;d+=1)l=!h&&(g>>d&1)==1,o[d%3+s-8-3][Math.floor(d/3)]=l},m=function(h,g){for(var d=e<<3|g,l=H.getBCHTypeInfo(d),f=0;f<15;f+=1){var _=!h&&(l>>f&1)==1;f<6?o[f][8]=_:f<8?o[f+1][8]=_:o[s-15+f][8]=_}for(f=0;f<15;f+=1)_=!h&&(l>>f&1)==1,f<8?o[8][s-f-1]=_:f<9?o[8][15-f-1+1]=_:o[8][15-f-1]=_;o[s-8][8]=!h},B=function(h,g){for(var d=-1,l=s-1,f=7,_=0,S=H.getMaskFunction(g),C=s-1;C>0;C-=2)for(C==6&&(C-=1);;){for(var D=0;D<2;D+=1)if(o[l][C-D]==null){var M=!1;_<h.length&&(M=(h[_]>>>f&1)==1),S(l,C-D)&&(M=!M),o[l][C-D]=M,(f-=1)==-1&&(_+=1,f=7)}if((l+=d)<0||s<=l){l-=d,d=-d;break}}},O=function(h,g,d){for(var l=it.getRSBlocks(h,g),f=ht(),_=0;_<d.length;_+=1){var S=d[_];f.put(S.getMode(),4),f.put(S.getLength(),H.getLengthInBits(S.getMode(),h)),S.write(f)}var C=0;for(_=0;_<l.length;_+=1)C+=l[_].dataCount;if(f.getLengthInBits()>8*C)throw"code length overflow. ("+f.getLengthInBits()+">"+8*C+")";for(f.getLengthInBits()+4<=8*C&&f.put(0,4);f.getLengthInBits()%8!=0;)f.putBit(!1);for(;!(f.getLengthInBits()>=8*C||(f.put(236,8),f.getLengthInBits()>=8*C));)f.put(17,8);return function(D,M){for(var A=0,q=0,I=0,j=new Array(M.length),E=new Array(M.length),x=0;x<M.length;x+=1){var rt=M[x].dataCount,ut=M[x].totalCount-rt;q=Math.max(q,rt),I=Math.max(I,ut),j[x]=new Array(rt);for(var P=0;P<j[x].length;P+=1)j[x][P]=255&D.getBuffer()[P+A];A+=rt;var Z=H.getErrorCorrectPolynomial(ut),Y=K(j[x],Z.getLength()-1).mod(Z);for(E[x]=new Array(Z.getLength()-1),P=0;P<E[x].length;P+=1){var tt=P+Y.getLength()-E[x].length;E[x][P]=tt>=0?Y.getAt(tt):0}}var wt=0;for(P=0;P<M.length;P+=1)wt+=M[P].totalCount;var ct=new Array(wt),G=0;for(P=0;P<q;P+=1)for(x=0;x<M.length;x+=1)P<j[x].length&&(ct[G]=j[x][P],G+=1);for(P=0;P<I;P+=1)for(x=0;x<M.length;x+=1)P<E[x].length&&(ct[G]=E[x][P],G+=1);return ct}(f,l)};c.addData=function(h,g){var d=null;switch(g=g||"Byte"){case"Numeric":d=_t(h);break;case"Alphanumeric":d=mt(h);break;case"Byte":d=at(h);break;case"Kanji":d=dt(h);break;default:throw"mode:"+g}u.push(d),a=null},c.isDark=function(h,g){if(h<0||s<=h||g<0||s<=g)throw h+","+g;return o[h][g]},c.getModuleCount=function(){return s},c.make=function(){if(i<1){for(var h=1;h<40;h++){for(var g=it.getRSBlocks(h,e),d=ht(),l=0;l<u.length;l++){var f=u[l];d.put(f.getMode(),4),d.put(f.getLength(),H.getLengthInBits(f.getMode(),h)),f.write(d)}var _=0;for(l=0;l<g.length;l++)_+=g[l].dataCount;if(d.getLengthInBits()<=8*_)break}i=h}w(!1,function(){for(var S=0,C=0,D=0;D<8;D+=1){w(!0,D);var M=H.getLostPoint(c);(D==0||S>M)&&(S=M,C=D)}return C}())},c.createTableTag=function(h,g){h=h||2;var d="";d+='<table style="',d+=" border-width: 0px; border-style: none;",d+=" border-collapse: collapse;",d+=" padding: 0px; margin: "+(g=g===void 0?4*h:g)+"px;",d+='">',d+="<tbody>";for(var l=0;l<c.getModuleCount();l+=1){d+="<tr>";for(var f=0;f<c.getModuleCount();f+=1)d+='<td style="',d+=" border-width: 0px; border-style: none;",d+=" border-collapse: collapse;",d+=" padding: 0px; margin: 0px;",d+=" width: "+h+"px;",d+=" height: "+h+"px;",d+=" background-color: ",d+=c.isDark(l,f)?"#000000":"#ffffff",d+=";",d+='"/>';d+="</tr>"}return(d+="</tbody>")+"</table>"},c.createSvgTag=function(h,g,d,l){var f={};typeof arguments[0]=="object"&&(h=(f=arguments[0]).cellSize,g=f.margin,d=f.alt,l=f.title),h=h||2,g=g===void 0?4*h:g,(d=typeof d=="string"?{text:d}:d||{}).text=d.text||null,d.id=d.text?d.id||"qrcode-description":null,(l=typeof l=="string"?{text:l}:l||{}).text=l.text||null,l.id=l.text?l.id||"qrcode-title":null;var _,S,C,D,M=c.getModuleCount()*h+2*g,A="";for(D="l"+h+",0 0,"+h+" -"+h+",0 0,-"+h+"z ",A+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',A+=f.scalable?"":' width="'+M+'px" height="'+M+'px"',A+=' viewBox="0 0 '+M+" "+M+'" ',A+=' preserveAspectRatio="xMinYMin meet"',A+=l.text||d.text?' role="img" aria-labelledby="'+b([l.id,d.id].join(" ").trim())+'"':"",A+=">",A+=l.text?'<title id="'+b(l.id)+'">'+b(l.text)+"</title>":"",A+=d.text?'<description id="'+b(d.id)+'">'+b(d.text)+"</description>":"",A+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',A+='<path d="',S=0;S<c.getModuleCount();S+=1)for(C=S*h+g,_=0;_<c.getModuleCount();_+=1)c.isDark(S,_)&&(A+="M"+(_*h+g)+","+C+D);return(A+='" stroke="transparent" fill="black"/>')+"</svg>"},c.createDataURL=function(h,g){h=h||2,g=g===void 0?4*h:g;var d=c.getModuleCount()*h+2*g,l=g,f=d-g;return n(d,d,function(_,S){if(l<=_&&_<f&&l<=S&&S<f){var C=Math.floor((_-l)/h),D=Math.floor((S-l)/h);return c.isDark(D,C)?0:1}return 1})},c.createImgTag=function(h,g,d){h=h||2,g=g===void 0?4*h:g;var l=c.getModuleCount()*h+2*g,f="";return f+="<img",f+=' src="',f+=c.createDataURL(h,g),f+='"',f+=' width="',f+=l,f+='"',f+=' height="',f+=l,f+='"',d&&(f+=' alt="',f+=b(d),f+='"'),f+"/>"};var b=function(h){for(var g="",d=0;d<h.length;d+=1){var l=h.charAt(d);switch(l){case"<":g+="&lt;";break;case">":g+="&gt;";break;case"&":g+="&amp;";break;case'"':g+="&quot;";break;default:g+=l}}return g};return c.createASCII=function(h,g){if((h=h||1)<2)return function(j){j=j===void 0?2:j;var E,x,rt,ut,P,Z=1*c.getModuleCount()+2*j,Y=j,tt=Z-j,wt={"██":"█","█ ":"▀"," █":"▄","  ":" "},ct={"██":"▀","█ ":"▀"," █":" ","  ":" "},G="";for(E=0;E<Z;E+=2){for(rt=Math.floor((E-Y)/1),ut=Math.floor((E+1-Y)/1),x=0;x<Z;x+=1)P="█",Y<=x&&x<tt&&Y<=E&&E<tt&&c.isDark(rt,Math.floor((x-Y)/1))&&(P=" "),Y<=x&&x<tt&&Y<=E+1&&E+1<tt&&c.isDark(ut,Math.floor((x-Y)/1))?P+=" ":P+="█",G+=j<1&&E+1>=tt?ct[P]:wt[P];G+=`
`}return Z%2&&j>0?G.substring(0,G.length-Z-1)+Array(Z+1).join("▀"):G.substring(0,G.length-1)}(g);h-=1,g=g===void 0?2*h:g;var d,l,f,_,S=c.getModuleCount()*h+2*g,C=g,D=S-g,M=Array(h+1).join("██"),A=Array(h+1).join("  "),q="",I="";for(d=0;d<S;d+=1){for(f=Math.floor((d-C)/h),I="",l=0;l<S;l+=1)_=1,C<=l&&l<D&&C<=d&&d<D&&c.isDark(f,Math.floor((l-C)/h))&&(_=0),I+=_?M:A;for(f=0;f<h;f+=1)q+=I+`
`}return q.substring(0,q.length-1)},c.renderTo2dContext=function(h,g){g=g||2;for(var d=c.getModuleCount(),l=0;l<d;l++)for(var f=0;f<d;f++)h.fillStyle=c.isDark(l,f)?"black":"white",h.fillRect(l*g,f*g,g,g)},c};W.stringToBytes=(W.stringToBytesFuncs={default:function(t){for(var r=[],i=0;i<t.length;i+=1){var e=t.charCodeAt(i);r.push(255&e)}return r}}).default,W.createStringToBytes=function(t,r){var i=function(){for(var o=$(t),s=function(){var v=o.read();if(v==-1)throw"eof";return v},a=0,u={};;){var c=o.read();if(c==-1)break;var w=s(),p=s()<<8|s();u[String.fromCharCode(c<<8|w)]=p,a+=1}if(a!=r)throw a+" != "+r;return u}(),e=63;return function(o){for(var s=[],a=0;a<o.length;a+=1){var u=o.charCodeAt(a);if(u<128)s.push(u);else{var c=i[o.charAt(a)];typeof c=="number"?(255&c)==c?s.push(c):(s.push(c>>>8),s.push(255&c)):s.push(e)}}return s}};var V,Q,N,z,U,et={L:1,M:0,Q:3,H:2},H=(V=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],Q=1335,N=7973,U=function(t){for(var r=0;t!=0;)r+=1,t>>>=1;return r},(z={}).getBCHTypeInfo=function(t){for(var r=t<<10;U(r)-U(Q)>=0;)r^=Q<<U(r)-U(Q);return 21522^(t<<10|r)},z.getBCHTypeNumber=function(t){for(var r=t<<12;U(r)-U(N)>=0;)r^=N<<U(r)-U(N);return t<<12|r},z.getPatternPosition=function(t){return V[t-1]},z.getMaskFunction=function(t){switch(t){case 0:return function(r,i){return(r+i)%2==0};case 1:return function(r,i){return r%2==0};case 2:return function(r,i){return i%3==0};case 3:return function(r,i){return(r+i)%3==0};case 4:return function(r,i){return(Math.floor(r/2)+Math.floor(i/3))%2==0};case 5:return function(r,i){return r*i%2+r*i%3==0};case 6:return function(r,i){return(r*i%2+r*i%3)%2==0};case 7:return function(r,i){return(r*i%3+(r+i)%2)%2==0};default:throw"bad maskPattern:"+t}},z.getErrorCorrectPolynomial=function(t){for(var r=K([1],0),i=0;i<t;i+=1)r=r.multiply(K([1,X.gexp(i)],0));return r},z.getLengthInBits=function(t,r){if(1<=r&&r<10)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+t}else if(r<27)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+t}else{if(!(r<41))throw"type:"+r;switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+t}}},z.getLostPoint=function(t){for(var r=t.getModuleCount(),i=0,e=0;e<r;e+=1)for(var o=0;o<r;o+=1){for(var s=0,a=t.isDark(e,o),u=-1;u<=1;u+=1)if(!(e+u<0||r<=e+u))for(var c=-1;c<=1;c+=1)o+c<0||r<=o+c||u==0&&c==0||a==t.isDark(e+u,o+c)&&(s+=1);s>5&&(i+=3+s-5)}for(e=0;e<r-1;e+=1)for(o=0;o<r-1;o+=1){var w=0;t.isDark(e,o)&&(w+=1),t.isDark(e+1,o)&&(w+=1),t.isDark(e,o+1)&&(w+=1),t.isDark(e+1,o+1)&&(w+=1),w!=0&&w!=4||(i+=3)}for(e=0;e<r;e+=1)for(o=0;o<r-6;o+=1)t.isDark(e,o)&&!t.isDark(e,o+1)&&t.isDark(e,o+2)&&t.isDark(e,o+3)&&t.isDark(e,o+4)&&!t.isDark(e,o+5)&&t.isDark(e,o+6)&&(i+=40);for(o=0;o<r;o+=1)for(e=0;e<r-6;e+=1)t.isDark(e,o)&&!t.isDark(e+1,o)&&t.isDark(e+2,o)&&t.isDark(e+3,o)&&t.isDark(e+4,o)&&!t.isDark(e+5,o)&&t.isDark(e+6,o)&&(i+=40);var p=0;for(o=0;o<r;o+=1)for(e=0;e<r;e+=1)t.isDark(e,o)&&(p+=1);return i+Math.abs(100*p/r/r-50)/5*10},z),X=function(){for(var t=new Array(256),r=new Array(256),i=0;i<8;i+=1)t[i]=1<<i;for(i=8;i<256;i+=1)t[i]=t[i-4]^t[i-5]^t[i-6]^t[i-8];for(i=0;i<255;i+=1)r[t[i]]=i;return{glog:function(e){if(e<1)throw"glog("+e+")";return r[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}}}();function K(t,r){if(t.length===void 0)throw t.length+"/"+r;var i=function(){for(var o=0;o<t.length&&t[o]==0;)o+=1;for(var s=new Array(t.length-o+r),a=0;a<t.length-o;a+=1)s[a]=t[a+o];return s}(),e={getAt:function(o){return i[o]},getLength:function(){return i.length},multiply:function(o){for(var s=new Array(e.getLength()+o.getLength()-1),a=0;a<e.getLength();a+=1)for(var u=0;u<o.getLength();u+=1)s[a+u]^=X.gexp(X.glog(e.getAt(a))+X.glog(o.getAt(u)));return K(s,0)},mod:function(o){if(e.getLength()-o.getLength()<0)return e;for(var s=X.glog(e.getAt(0))-X.glog(o.getAt(0)),a=new Array(e.getLength()),u=0;u<e.getLength();u+=1)a[u]=e.getAt(u);for(u=0;u<o.getLength();u+=1)a[u]^=X.gexp(X.glog(o.getAt(u))+s);return K(a,0).mod(o)}};return e}var it=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r=function(e,o){var s={};return s.totalCount=e,s.dataCount=o,s},i={getRSBlocks:function(e,o){var s=function(k,m){switch(m){case et.L:return t[4*(k-1)+0];case et.M:return t[4*(k-1)+1];case et.Q:return t[4*(k-1)+2];case et.H:return t[4*(k-1)+3];default:return}}(e,o);if(s===void 0)throw"bad rs block @ typeNumber:"+e+"/errorCorrectionLevel:"+o;for(var a=s.length/3,u=[],c=0;c<a;c+=1)for(var w=s[3*c+0],p=s[3*c+1],v=s[3*c+2],y=0;y<w;y+=1)u.push(r(p,v));return u}};return i}(),ht=function(){var t=[],r=0,i={getBuffer:function(){return t},getAt:function(e){var o=Math.floor(e/8);return(t[o]>>>7-e%8&1)==1},put:function(e,o){for(var s=0;s<o;s+=1)i.putBit((e>>>o-s-1&1)==1)},getLengthInBits:function(){return r},putBit:function(e){var o=Math.floor(r/8);t.length<=o&&t.push(0),e&&(t[o]|=128>>>r%8),r+=1}};return i},_t=function(t){var r=t,i={getMode:function(){return 1},getLength:function(s){return r.length},write:function(s){for(var a=r,u=0;u+2<a.length;)s.put(e(a.substring(u,u+3)),10),u+=3;u<a.length&&(a.length-u==1?s.put(e(a.substring(u,u+1)),4):a.length-u==2&&s.put(e(a.substring(u,u+2)),7))}},e=function(s){for(var a=0,u=0;u<s.length;u+=1)a=10*a+o(s.charAt(u));return a},o=function(s){if("0"<=s&&s<="9")return s.charCodeAt(0)-48;throw"illegal char :"+s};return i},mt=function(t){var r=t,i={getMode:function(){return 2},getLength:function(o){return r.length},write:function(o){for(var s=r,a=0;a+1<s.length;)o.put(45*e(s.charAt(a))+e(s.charAt(a+1)),11),a+=2;a<s.length&&o.put(e(s.charAt(a)),6)}},e=function(o){if("0"<=o&&o<="9")return o.charCodeAt(0)-48;if("A"<=o&&o<="Z")return o.charCodeAt(0)-65+10;switch(o){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+o}};return i},at=function(t){var r=W.stringToBytes(t);return{getMode:function(){return 4},getLength:function(i){return r.length},write:function(i){for(var e=0;e<r.length;e+=1)i.put(r[e],8)}}},dt=function(t){var r=W.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";(function(){var o=r("友");if(o.length!=2||(o[0]<<8|o[1])!=38726)throw"sjis not supported."})();var i=r(t),e={getMode:function(){return 8},getLength:function(o){return~~(i.length/2)},write:function(o){for(var s=i,a=0;a+1<s.length;){var u=(255&s[a])<<8|255&s[a+1];if(33088<=u&&u<=40956)u-=33088;else{if(!(57408<=u&&u<=60351))throw"illegal char at "+(a+1)+"/"+u;u-=49472}u=192*(u>>>8&255)+(255&u),o.put(u,13),a+=2}if(a<s.length)throw"illegal char at "+(a+1)}};return e},pt=function(){var t=[],r={writeByte:function(i){t.push(255&i)},writeShort:function(i){r.writeByte(i),r.writeByte(i>>>8)},writeBytes:function(i,e,o){e=e||0,o=o||i.length;for(var s=0;s<o;s+=1)r.writeByte(i[s+e])},writeString:function(i){for(var e=0;e<i.length;e+=1)r.writeByte(i.charCodeAt(e))},toByteArray:function(){return t},toString:function(){var i="";i+="[";for(var e=0;e<t.length;e+=1)e>0&&(i+=","),i+=t[e];return i+"]"}};return r},$=function(t){var r=t,i=0,e=0,o=0,s={read:function(){for(;o<8;){if(i>=r.length){if(o==0)return-1;throw"unexpected end of file./"+o}var u=r.charAt(i);if(i+=1,u=="=")return o=0,-1;u.match(/^\s$/)||(e=e<<6|a(u.charCodeAt(0)),o+=6)}var c=e>>>o-8&255;return o-=8,c}},a=function(u){if(65<=u&&u<=90)return u-65;if(97<=u&&u<=122)return u-97+26;if(48<=u&&u<=57)return u-48+52;if(u==43)return 62;if(u==47)return 63;throw"c:"+u};return s},n=function(t,r,i){for(var e=function(p,v){var y=p,k=v,m=new Array(p*v),B={setPixel:function(h,g,d){m[g*y+h]=d},write:function(h){h.writeString("GIF87a"),h.writeShort(y),h.writeShort(k),h.writeByte(128),h.writeByte(0),h.writeByte(0),h.writeByte(0),h.writeByte(0),h.writeByte(0),h.writeByte(255),h.writeByte(255),h.writeByte(255),h.writeString(","),h.writeShort(0),h.writeShort(0),h.writeShort(y),h.writeShort(k),h.writeByte(0);var g=O(2);h.writeByte(2);for(var d=0;g.length-d>255;)h.writeByte(255),h.writeBytes(g,d,255),d+=255;h.writeByte(g.length-d),h.writeBytes(g,d,g.length-d),h.writeByte(0),h.writeString(";")}},O=function(h){for(var g=1<<h,d=1+(1<<h),l=h+1,f=b(),_=0;_<g;_+=1)f.add(String.fromCharCode(_));f.add(String.fromCharCode(g)),f.add(String.fromCharCode(d));var S,C,D,M=pt(),A=(S=M,C=0,D=0,{write:function(E,x){if(E>>>x)throw"length over";for(;C+x>=8;)S.writeByte(255&(E<<C|D)),x-=8-C,E>>>=8-C,D=0,C=0;D|=E<<C,C+=x},flush:function(){C>0&&S.writeByte(D)}});A.write(g,l);var q=0,I=String.fromCharCode(m[q]);for(q+=1;q<m.length;){var j=String.fromCharCode(m[q]);q+=1,f.contains(I+j)?I+=j:(A.write(f.indexOf(I),l),f.size()<4095&&(f.size()==1<<l&&(l+=1),f.add(I+j)),I=j)}return A.write(f.indexOf(I),l),A.write(d,l),A.flush(),M.toByteArray()},b=function(){var h={},g=0,d={add:function(l){if(d.contains(l))throw"dup key:"+l;h[l]=g,g+=1},size:function(){return g},indexOf:function(l){return h[l]},contains:function(l){return h[l]!==void 0}};return d};return B}(t,r),o=0;o<r;o+=1)for(var s=0;s<t;s+=1)e.setPixel(s,o,i(s,o));var a=pt();e.write(a);for(var u=function(){var p=0,v=0,y=0,k="",m={},B=function(b){k+=String.fromCharCode(O(63&b))},O=function(b){if(!(b<0)){if(b<26)return 65+b;if(b<52)return b-26+97;if(b<62)return b-52+48;if(b==62)return 43;if(b==63)return 47}throw"n:"+b};return m.writeByte=function(b){for(p=p<<8|255&b,v+=8,y+=1;v>=6;)B(p>>>v-6),v-=6},m.flush=function(){if(v>0&&(B(p<<6-v),p=0,v=0),y%3!=0)for(var b=3-y%3,h=0;h<b;h+=1)k+="="},m.toString=function(){return k},m}(),c=a.toByteArray(),w=0;w<c.length;w+=1)u.writeByte(c[w]);return u.flush(),"data:image/gif;base64,"+u};return W}();st.stringToBytesFuncs["UTF-8"]=function(W){return function(V){for(var Q=[],N=0;N<V.length;N++){var z=V.charCodeAt(N);z<128?Q.push(z):z<2048?Q.push(192|z>>6,128|63&z):z<55296||z>=57344?Q.push(224|z>>12,128|z>>6&63,128|63&z):(N++,z=65536+((1023&z)<<10|1023&V.charCodeAt(N)),Q.push(240|z>>18,128|z>>12&63,128|z>>6&63,128|63&z))}return Q}(W)},(ft=typeof(F=function(){return st})=="function"?F.apply(L,[]):F)===void 0||(R.exports=ft)}},J={};function T(R){var L=J[R];if(L!==void 0)return L.exports;var F=J[R]={exports:{}};return nt[R](F,F.exports,T),F.exports}T.n=R=>{var L=R&&R.__esModule?()=>R.default:()=>R;return T.d(L,{a:L}),L},T.d=(R,L)=>{for(var F in L)T.o(L,F)&&!T.o(R,F)&&Object.defineProperty(R,F,{enumerable:!0,get:L[F]})},T.o=(R,L)=>Object.prototype.hasOwnProperty.call(R,L);var ot={};return(()=>{T.d(ot,{default:()=>pt});const R=$=>!!$&&typeof $=="object"&&!Array.isArray($);function L($,...n){if(!n.length)return $;const t=n.shift();return t!==void 0&&R($)&&R(t)?($=Object.assign({},$),Object.keys(t).forEach(r=>{const i=$[r],e=t[r];Array.isArray(i)&&Array.isArray(e)?$[r]=e:R(i)&&R(e)?$[r]=L(Object.assign({},i),e):$[r]=e}),L($,...n)):$}function F($,n){const t=document.createElement("a");t.download=n,t.href=$,document.body.appendChild(t),t.click(),document.body.removeChild(t)}const ft={L:.07,M:.15,Q:.25,H:.3};class st{constructor({svg:n,type:t,window:r}){this._svg=n,this._type=t,this._window=r}draw(n,t,r,i){let e;switch(this._type){case"dots":e=this._drawDot;break;case"classy":e=this._drawClassy;break;case"classy-rounded":e=this._drawClassyRounded;break;case"rounded":e=this._drawRounded;break;case"extra-rounded":e=this._drawExtraRounded;break;default:e=this._drawSquare}e.call(this,{x:n,y:t,size:r,getNeighbor:i})}_rotateFigure({x:n,y:t,size:r,rotation:i=0,draw:e}){var o;const s=n+r/2,a=t+r/2;e(),(o=this._element)===null||o===void 0||o.setAttribute("transform",`rotate(${180*i/Math.PI},${s},${a})`)}_basicDot(n){const{size:t,x:r,y:i}=n;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(r+t/2)),this._element.setAttribute("cy",String(i+t/2)),this._element.setAttribute("r",String(t/2))}}))}_basicSquare(n){const{size:t,x:r,y:i}=n;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(r)),this._element.setAttribute("y",String(i)),this._element.setAttribute("width",String(t)),this._element.setAttribute("height",String(t))}}))}_basicSideRounded(n){const{size:t,x:r,y:i}=n;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${r} ${i}v ${t}h `+t/2+`a ${t/2} ${t/2}, 0, 0, 0, 0 ${-t}`)}}))}_basicCornerRounded(n){const{size:t,x:r,y:i}=n;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${r} ${i}v ${t}h ${t}v `+-t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${-t/2} ${-t/2}`)}}))}_basicCornerExtraRounded(n){const{size:t,x:r,y:i}=n;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${r} ${i}v ${t}h ${t}a ${t} ${t}, 0, 0, 0, ${-t} ${-t}`)}}))}_basicCornersRounded(n){const{size:t,x:r,y:i}=n;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${r} ${i}v `+t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${t/2} ${t/2}h `+t/2+"v "+-t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${-t/2} ${-t/2}`)}}))}_drawDot({x:n,y:t,size:r}){this._basicDot({x:n,y:t,size:r,rotation:0})}_drawSquare({x:n,y:t,size:r}){this._basicSquare({x:n,y:t,size:r,rotation:0})}_drawRounded({x:n,y:t,size:r,getNeighbor:i}){const e=i?+i(-1,0):0,o=i?+i(1,0):0,s=i?+i(0,-1):0,a=i?+i(0,1):0,u=e+o+s+a;if(u!==0)if(u>2||e&&o||s&&a)this._basicSquare({x:n,y:t,size:r,rotation:0});else{if(u===2){let c=0;return e&&s?c=Math.PI/2:s&&o?c=Math.PI:o&&a&&(c=-Math.PI/2),void this._basicCornerRounded({x:n,y:t,size:r,rotation:c})}if(u===1){let c=0;return s?c=Math.PI/2:o?c=Math.PI:a&&(c=-Math.PI/2),void this._basicSideRounded({x:n,y:t,size:r,rotation:c})}}else this._basicDot({x:n,y:t,size:r,rotation:0})}_drawExtraRounded({x:n,y:t,size:r,getNeighbor:i}){const e=i?+i(-1,0):0,o=i?+i(1,0):0,s=i?+i(0,-1):0,a=i?+i(0,1):0,u=e+o+s+a;if(u!==0)if(u>2||e&&o||s&&a)this._basicSquare({x:n,y:t,size:r,rotation:0});else{if(u===2){let c=0;return e&&s?c=Math.PI/2:s&&o?c=Math.PI:o&&a&&(c=-Math.PI/2),void this._basicCornerExtraRounded({x:n,y:t,size:r,rotation:c})}if(u===1){let c=0;return s?c=Math.PI/2:o?c=Math.PI:a&&(c=-Math.PI/2),void this._basicSideRounded({x:n,y:t,size:r,rotation:c})}}else this._basicDot({x:n,y:t,size:r,rotation:0})}_drawClassy({x:n,y:t,size:r,getNeighbor:i}){const e=i?+i(-1,0):0,o=i?+i(1,0):0,s=i?+i(0,-1):0,a=i?+i(0,1):0;e+o+s+a!==0?e||s?o||a?this._basicSquare({x:n,y:t,size:r,rotation:0}):this._basicCornerRounded({x:n,y:t,size:r,rotation:Math.PI/2}):this._basicCornerRounded({x:n,y:t,size:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:n,y:t,size:r,rotation:Math.PI/2})}_drawClassyRounded({x:n,y:t,size:r,getNeighbor:i}){const e=i?+i(-1,0):0,o=i?+i(1,0):0,s=i?+i(0,-1):0,a=i?+i(0,1):0;e+o+s+a!==0?e||s?o||a?this._basicSquare({x:n,y:t,size:r,rotation:0}):this._basicCornerExtraRounded({x:n,y:t,size:r,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:n,y:t,size:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:n,y:t,size:r,rotation:Math.PI/2})}}class W{constructor({svg:n,type:t,window:r}){this._svg=n,this._type=t,this._window=r}draw(n,t,r,i){let e;switch(this._type){case"square":e=this._drawSquare;break;case"extra-rounded":e=this._drawExtraRounded;break;default:e=this._drawDot}e.call(this,{x:n,y:t,size:r,rotation:i})}_rotateFigure({x:n,y:t,size:r,rotation:i=0,draw:e}){var o;const s=n+r/2,a=t+r/2;e(),(o=this._element)===null||o===void 0||o.setAttribute("transform",`rotate(${180*i/Math.PI},${s},${a})`)}_basicDot(n){const{size:t,x:r,y:i}=n,e=t/7;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${r+t/2} ${i}a ${t/2} ${t/2} 0 1 0 0.1 0zm 0 ${e}a ${t/2-e} ${t/2-e} 0 1 1 -0.1 0Z`)}}))}_basicSquare(n){const{size:t,x:r,y:i}=n,e=t/7;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${r} ${i}v ${t}h ${t}v `+-t+`zM ${r+e} ${i+e}h `+(t-2*e)+"v "+(t-2*e)+"h "+(2*e-t)+"z")}}))}_basicExtraRounded(n){const{size:t,x:r,y:i}=n,e=t/7;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${r} ${i+2.5*e}v `+2*e+`a ${2.5*e} ${2.5*e}, 0, 0, 0, ${2.5*e} ${2.5*e}h `+2*e+`a ${2.5*e} ${2.5*e}, 0, 0, 0, ${2.5*e} ${2.5*-e}v `+-2*e+`a ${2.5*e} ${2.5*e}, 0, 0, 0, ${2.5*-e} ${2.5*-e}h `+-2*e+`a ${2.5*e} ${2.5*e}, 0, 0, 0, ${2.5*-e} ${2.5*e}M ${r+2.5*e} ${i+e}h `+2*e+`a ${1.5*e} ${1.5*e}, 0, 0, 1, ${1.5*e} ${1.5*e}v `+2*e+`a ${1.5*e} ${1.5*e}, 0, 0, 1, ${1.5*-e} ${1.5*e}h `+-2*e+`a ${1.5*e} ${1.5*e}, 0, 0, 1, ${1.5*-e} ${1.5*-e}v `+-2*e+`a ${1.5*e} ${1.5*e}, 0, 0, 1, ${1.5*e} ${1.5*-e}`)}}))}_drawDot({x:n,y:t,size:r,rotation:i}){this._basicDot({x:n,y:t,size:r,rotation:i})}_drawSquare({x:n,y:t,size:r,rotation:i}){this._basicSquare({x:n,y:t,size:r,rotation:i})}_drawExtraRounded({x:n,y:t,size:r,rotation:i}){this._basicExtraRounded({x:n,y:t,size:r,rotation:i})}}class V{constructor({svg:n,type:t,window:r}){this._svg=n,this._type=t,this._window=r}draw(n,t,r,i){let e;e=this._type==="square"?this._drawSquare:this._drawDot,e.call(this,{x:n,y:t,size:r,rotation:i})}_rotateFigure({x:n,y:t,size:r,rotation:i=0,draw:e}){var o;const s=n+r/2,a=t+r/2;e(),(o=this._element)===null||o===void 0||o.setAttribute("transform",`rotate(${180*i/Math.PI},${s},${a})`)}_basicDot(n){const{size:t,x:r,y:i}=n;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(r+t/2)),this._element.setAttribute("cy",String(i+t/2)),this._element.setAttribute("r",String(t/2))}}))}_basicSquare(n){const{size:t,x:r,y:i}=n;this._rotateFigure(Object.assign(Object.assign({},n),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(r)),this._element.setAttribute("y",String(i)),this._element.setAttribute("width",String(t)),this._element.setAttribute("height",String(t))}}))}_drawDot({x:n,y:t,size:r,rotation:i}){this._basicDot({x:n,y:t,size:r,rotation:i})}_drawSquare({x:n,y:t,size:r,rotation:i}){this._basicSquare({x:n,y:t,size:r,rotation:i})}}const Q="circle",N=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],z=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class U{constructor(n,t){this._roundSize=r=>this._options.dotsOptions.roundSize?Math.floor(r):r,this._window=t,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(n.width)),this._element.setAttribute("height",String(n.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),n.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${n.width} ${n.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=n.image,this._instanceId=U.instanceCount++,this._options=n}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(n){const t=n.getModuleCount(),r=Math.min(this._options.width,this._options.height)-2*this._options.margin,i=this._options.shape===Q?r/Math.sqrt(2):r,e=this._roundSize(i/t);let o={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=n,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:s,qrOptions:a}=this._options,u=s.imageSize*ft[a.errorCorrectionLevel],c=Math.floor(u*t*t);o=function({originalHeight:w,originalWidth:p,maxHiddenDots:v,maxHiddenAxisDots:y,dotSize:k}){const m={x:0,y:0},B={x:0,y:0};if(w<=0||p<=0||v<=0||k<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const O=w/p;return m.x=Math.floor(Math.sqrt(v/O)),m.x<=0&&(m.x=1),y&&y<m.x&&(m.x=y),m.x%2==0&&m.x--,B.x=m.x*k,m.y=1+2*Math.ceil((m.x*O-1)/2),B.y=Math.round(B.x*O),(m.y*m.x>v||y&&y<m.y)&&(y&&y<m.y?(m.y=y,m.y%2==0&&m.x--):m.y-=2,B.y=m.y*k,m.x=1+2*Math.ceil((m.y/O-1)/2),B.x=Math.round(B.y/O)),{height:B.y,width:B.x,hideYDots:m.y,hideXDots:m.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:c,maxHiddenAxisDots:t-14,dotSize:e})}this.drawBackground(),this.drawDots((s,a)=>{var u,c,w,p,v,y;return!(this._options.imageOptions.hideBackgroundDots&&s>=(t-o.hideYDots)/2&&s<(t+o.hideYDots)/2&&a>=(t-o.hideXDots)/2&&a<(t+o.hideXDots)/2||!((u=N[s])===null||u===void 0)&&u[a]||!((c=N[s-t+7])===null||c===void 0)&&c[a]||!((w=N[s])===null||w===void 0)&&w[a-t+7]||!((p=z[s])===null||p===void 0)&&p[a]||!((v=z[s-t+7])===null||v===void 0)&&v[a]||!((y=z[s])===null||y===void 0)&&y[a-t+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:o.width,height:o.height,count:t,dotSize:e})}drawBackground(){var n,t,r;const i=this._element,e=this._options;if(i){const o=(n=e.backgroundOptions)===null||n===void 0?void 0:n.gradient,s=(t=e.backgroundOptions)===null||t===void 0?void 0:t.color;let a=e.height,u=e.width;if(o||s){const c=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((r=e.backgroundOptions)===null||r===void 0)&&r.round&&(a=u=Math.min(e.width,e.height),c.setAttribute("rx",String(a/2*e.backgroundOptions.round))),c.setAttribute("x",String(this._roundSize((e.width-u)/2))),c.setAttribute("y",String(this._roundSize((e.height-a)/2))),c.setAttribute("width",String(u)),c.setAttribute("height",String(a)),this._backgroundClipPath.appendChild(c),this._createColor({options:o,color:s,additionalRotation:0,x:0,y:0,height:e.height,width:e.width,name:`background-color-${this._instanceId}`})}}}drawDots(n){var t,r;if(!this._qr)throw"QR code is not defined";const i=this._options,e=this._qr.getModuleCount();if(e>i.width||e>i.height)throw"The canvas is too small.";const o=Math.min(i.width,i.height)-2*i.margin,s=i.shape===Q?o/Math.sqrt(2):o,a=this._roundSize(s/e),u=this._roundSize((i.width-e*a)/2),c=this._roundSize((i.height-e*a)/2),w=new st({svg:this._element,type:i.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(t=i.dotsOptions)===null||t===void 0?void 0:t.gradient,color:i.dotsOptions.color,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:`dot-color-${this._instanceId}`});for(let p=0;p<e;p++)for(let v=0;v<e;v++)n&&!n(p,v)||!((r=this._qr)===null||r===void 0)&&r.isDark(p,v)&&(w.draw(u+v*a,c+p*a,a,(y,k)=>!(v+y<0||p+k<0||v+y>=e||p+k>=e)&&!(n&&!n(p+k,v+y))&&!!this._qr&&this._qr.isDark(p+k,v+y)),w._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(w._element));if(i.shape===Q){const p=this._roundSize((o/a-e)/2),v=e+2*p,y=u-p*a,k=c-p*a,m=[],B=this._roundSize(v/2);for(let O=0;O<v;O++){m[O]=[];for(let b=0;b<v;b++)O>=p-1&&O<=v-p&&b>=p-1&&b<=v-p||Math.sqrt((O-B)*(O-B)+(b-B)*(b-B))>B?m[O][b]=0:m[O][b]=this._qr.isDark(b-2*p<0?b:b>=e?b-2*p:b-p,O-2*p<0?O:O>=e?O-2*p:O-p)?1:0}for(let O=0;O<v;O++)for(let b=0;b<v;b++)m[O][b]&&(w.draw(y+b*a,k+O*a,a,(h,g)=>{var d;return!!(!((d=m[O+g])===null||d===void 0)&&d[b+h])}),w._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(w._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const n=this._element,t=this._options;if(!n)throw"Element code is not defined";const r=this._qr.getModuleCount(),i=Math.min(t.width,t.height)-2*t.margin,e=t.shape===Q?i/Math.sqrt(2):i,o=this._roundSize(e/r),s=7*o,a=3*o,u=this._roundSize((t.width-r*o)/2),c=this._roundSize((t.height-r*o)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([w,p,v])=>{var y,k,m,B,O,b,h,g,d,l,f,_;const S=u+w*o*(r-7),C=c+p*o*(r-7);let D=this._dotsClipPath,M=this._dotsClipPath;if((!((y=t.cornersSquareOptions)===null||y===void 0)&&y.gradient||!((k=t.cornersSquareOptions)===null||k===void 0)&&k.color)&&(D=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),D.setAttribute("id",`clip-path-corners-square-color-${w}-${p}-${this._instanceId}`),this._defs.appendChild(D),this._cornersSquareClipPath=this._cornersDotClipPath=M=D,this._createColor({options:(m=t.cornersSquareOptions)===null||m===void 0?void 0:m.gradient,color:(B=t.cornersSquareOptions)===null||B===void 0?void 0:B.color,additionalRotation:v,x:S,y:C,height:s,width:s,name:`corners-square-color-${w}-${p}-${this._instanceId}`})),(O=t.cornersSquareOptions)===null||O===void 0?void 0:O.type){const A=new W({svg:this._element,type:t.cornersSquareOptions.type,window:this._window});A.draw(S,C,s,v),A._element&&D&&D.appendChild(A._element)}else{const A=new st({svg:this._element,type:t.dotsOptions.type,window:this._window});for(let q=0;q<N.length;q++)for(let I=0;I<N[q].length;I++)!((b=N[q])===null||b===void 0)&&b[I]&&(A.draw(S+I*o,C+q*o,o,(j,E)=>{var x;return!!(!((x=N[q+E])===null||x===void 0)&&x[I+j])}),A._element&&D&&D.appendChild(A._element))}if((!((h=t.cornersDotOptions)===null||h===void 0)&&h.gradient||!((g=t.cornersDotOptions)===null||g===void 0)&&g.color)&&(M=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),M.setAttribute("id",`clip-path-corners-dot-color-${w}-${p}-${this._instanceId}`),this._defs.appendChild(M),this._cornersDotClipPath=M,this._createColor({options:(d=t.cornersDotOptions)===null||d===void 0?void 0:d.gradient,color:(l=t.cornersDotOptions)===null||l===void 0?void 0:l.color,additionalRotation:v,x:S+2*o,y:C+2*o,height:a,width:a,name:`corners-dot-color-${w}-${p}-${this._instanceId}`})),(f=t.cornersDotOptions)===null||f===void 0?void 0:f.type){const A=new V({svg:this._element,type:t.cornersDotOptions.type,window:this._window});A.draw(S+2*o,C+2*o,a,v),A._element&&M&&M.appendChild(A._element)}else{const A=new st({svg:this._element,type:t.dotsOptions.type,window:this._window});for(let q=0;q<z.length;q++)for(let I=0;I<z[q].length;I++)!((_=z[q])===null||_===void 0)&&_[I]&&(A.draw(S+I*o,C+q*o,o,(j,E)=>{var x;return!!(!((x=z[q+E])===null||x===void 0)&&x[I+j])}),A._element&&M&&M.appendChild(A._element))}})}loadImage(){return new Promise((n,t)=>{var r;const i=this._options;if(!i.image)return t("Image is not defined");if(!((r=i.nodeCanvas)===null||r===void 0)&&r.loadImage)i.nodeCanvas.loadImage(i.image).then(e=>{var o,s;if(this._image=e,this._options.imageOptions.saveAsBlob){const a=(o=i.nodeCanvas)===null||o===void 0?void 0:o.createCanvas(this._image.width,this._image.height);(s=a==null?void 0:a.getContext("2d"))===null||s===void 0||s.drawImage(e,0,0),this._imageUri=a==null?void 0:a.toDataURL()}n()}).catch(t);else{const e=new this._window.Image;typeof i.imageOptions.crossOrigin=="string"&&(e.crossOrigin=i.imageOptions.crossOrigin),this._image=e,e.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await async function(o,s){return new Promise(a=>{const u=new s.XMLHttpRequest;u.onload=function(){const c=new s.FileReader;c.onloadend=function(){a(c.result)},c.readAsDataURL(u.response)},u.open("GET",o),u.responseType="blob",u.send()})}(i.image||"",this._window)),n()},e.src=i.image}})}async drawImage({width:n,height:t,count:r,dotSize:i}){const e=this._options,o=this._roundSize((e.width-r*i)/2),s=this._roundSize((e.height-r*i)/2),a=o+this._roundSize(e.imageOptions.margin+(r*i-n)/2),u=s+this._roundSize(e.imageOptions.margin+(r*i-t)/2),c=n-2*e.imageOptions.margin,w=t-2*e.imageOptions.margin,p=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");p.setAttribute("href",this._imageUri||""),p.setAttribute("x",String(a)),p.setAttribute("y",String(u)),p.setAttribute("width",`${c}px`),p.setAttribute("height",`${w}px`),this._element.appendChild(p)}_createColor({options:n,color:t,additionalRotation:r,x:i,y:e,height:o,width:s,name:a}){const u=s>o?s:o,c=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(c.setAttribute("x",String(i)),c.setAttribute("y",String(e)),c.setAttribute("height",String(o)),c.setAttribute("width",String(s)),c.setAttribute("clip-path",`url('#clip-path-${a}')`),n){let w;if(n.type==="radial")w=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),w.setAttribute("id",a),w.setAttribute("gradientUnits","userSpaceOnUse"),w.setAttribute("fx",String(i+s/2)),w.setAttribute("fy",String(e+o/2)),w.setAttribute("cx",String(i+s/2)),w.setAttribute("cy",String(e+o/2)),w.setAttribute("r",String(u/2));else{const p=((n.rotation||0)+r)%(2*Math.PI),v=(p+2*Math.PI)%(2*Math.PI);let y=i+s/2,k=e+o/2,m=i+s/2,B=e+o/2;v>=0&&v<=.25*Math.PI||v>1.75*Math.PI&&v<=2*Math.PI?(y-=s/2,k-=o/2*Math.tan(p),m+=s/2,B+=o/2*Math.tan(p)):v>.25*Math.PI&&v<=.75*Math.PI?(k-=o/2,y-=s/2/Math.tan(p),B+=o/2,m+=s/2/Math.tan(p)):v>.75*Math.PI&&v<=1.25*Math.PI?(y+=s/2,k+=o/2*Math.tan(p),m-=s/2,B-=o/2*Math.tan(p)):v>1.25*Math.PI&&v<=1.75*Math.PI&&(k+=o/2,y+=s/2/Math.tan(p),B-=o/2,m-=s/2/Math.tan(p)),w=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),w.setAttribute("id",a),w.setAttribute("gradientUnits","userSpaceOnUse"),w.setAttribute("x1",String(Math.round(y))),w.setAttribute("y1",String(Math.round(k))),w.setAttribute("x2",String(Math.round(m))),w.setAttribute("y2",String(Math.round(B)))}n.colorStops.forEach(({offset:p,color:v})=>{const y=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");y.setAttribute("offset",100*p+"%"),y.setAttribute("stop-color",v),w.appendChild(y)}),c.setAttribute("fill",`url('#${a}')`),this._defs.appendChild(w)}else t&&c.setAttribute("fill",t);this._element.appendChild(c)}}U.instanceCount=0;const et=U,H="canvas",X={};for(let $=0;$<=40;$++)X[$]=$;const K={type:H,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:X[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function it($){const n=Object.assign({},$);if(!n.colorStops||!n.colorStops.length)throw"Field 'colorStops' is required in gradient";return n.rotation?n.rotation=Number(n.rotation):n.rotation=0,n.colorStops=n.colorStops.map(t=>Object.assign(Object.assign({},t),{offset:Number(t.offset)})),n}function ht($){const n=Object.assign({},$);return n.width=Number(n.width),n.height=Number(n.height),n.margin=Number(n.margin),n.imageOptions=Object.assign(Object.assign({},n.imageOptions),{hideBackgroundDots:!!n.imageOptions.hideBackgroundDots,imageSize:Number(n.imageOptions.imageSize),margin:Number(n.imageOptions.margin)}),n.margin>Math.min(n.width,n.height)&&(n.margin=Math.min(n.width,n.height)),n.dotsOptions=Object.assign({},n.dotsOptions),n.dotsOptions.gradient&&(n.dotsOptions.gradient=it(n.dotsOptions.gradient)),n.cornersSquareOptions&&(n.cornersSquareOptions=Object.assign({},n.cornersSquareOptions),n.cornersSquareOptions.gradient&&(n.cornersSquareOptions.gradient=it(n.cornersSquareOptions.gradient))),n.cornersDotOptions&&(n.cornersDotOptions=Object.assign({},n.cornersDotOptions),n.cornersDotOptions.gradient&&(n.cornersDotOptions.gradient=it(n.cornersDotOptions.gradient))),n.backgroundOptions&&(n.backgroundOptions=Object.assign({},n.backgroundOptions),n.backgroundOptions.gradient&&(n.backgroundOptions.gradient=it(n.backgroundOptions.gradient))),n}var _t=T(873),mt=T.n(_t);function at($){if(!$)throw new Error("Extension must be defined");$[0]==="."&&($=$.substring(1));const n={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[$.toLowerCase()];if(!n)throw new Error(`Extension "${$}" is not supported`);return n}class dt{constructor(n){n!=null&&n.jsdom?this._window=new n.jsdom("",{resources:"usable"}).window:this._window=window,this._options=n?ht(L(K,n)):K,this.update()}static _clearContainer(n){n&&(n.innerHTML="")}_setupSvg(){if(!this._qr)return;const n=new et(this._options,this._window);this._svg=n.getElement(),this._svgDrawingPromise=n.drawQR(this._qr).then(()=>{var t;this._svg&&((t=this._extension)===null||t===void 0||t.call(this,n.getElement(),this._options))})}_setupCanvas(){var n,t;this._qr&&(!((n=this._options.nodeCanvas)===null||n===void 0)&&n.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(t=this._svgDrawingPromise)===null||t===void 0?void 0:t.then(()=>{var r;if(!this._svg)return;const i=this._svg,e=new this._window.XMLSerializer().serializeToString(i),o=btoa(e),s=`data:${at("svg")};base64,${o}`;if(!((r=this._options.nodeCanvas)===null||r===void 0)&&r.loadImage)return this._options.nodeCanvas.loadImage(s).then(a=>{var u,c;a.width=this._options.width,a.height=this._options.height,(c=(u=this._nodeCanvas)===null||u===void 0?void 0:u.getContext("2d"))===null||c===void 0||c.drawImage(a,0,0)});{const a=new this._window.Image;return new Promise(u=>{a.onload=()=>{var c,w;(w=(c=this._domCanvas)===null||c===void 0?void 0:c.getContext("2d"))===null||w===void 0||w.drawImage(a,0,0),u()},a.src=s})}}))}async _getElement(n="png"){if(!this._qr)throw"QR code is empty";return n.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(n){dt._clearContainer(this._container),this._options=n?ht(L(this._options,n)):this._options,this._options.data&&(this._qr=mt()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(t):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===H?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(n){if(n){if(typeof n.appendChild!="function")throw"Container should be a single DOM node";this._options.type===H?this._domCanvas&&n.appendChild(this._domCanvas):this._svg&&n.appendChild(this._svg),this._container=n}}applyExtension(n){if(!n)throw"Extension function should be defined.";this._extension=n,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(n="png"){if(!this._qr)throw"QR code is empty";const t=await this._getElement(n),r=at(n);if(!t)return null;if(n.toLowerCase()==="svg"){const i=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(t)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(i):new Blob([i],{type:r})}return new Promise(i=>{const e=t;if("toBuffer"in e)if(r==="image/png")i(e.toBuffer(r));else if(r==="image/jpeg")i(e.toBuffer(r));else{if(r!=="application/pdf")throw Error("Unsupported extension");i(e.toBuffer(r))}else"toBlob"in e&&e.toBlob(i,r,1)})}async download(n){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let t="png",r="qr";typeof n=="string"?(t=n,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof n=="object"&&n!==null&&(n.name&&(r=n.name),n.extension&&(t=n.extension));const i=await this._getElement(t);if(i)if(t.toLowerCase()==="svg"){let e=new XMLSerializer().serializeToString(i);e=`<?xml version="1.0" standalone="no"?>\r
`+e,F(`data:${at(t)};charset=utf-8,${encodeURIComponent(e)}`,`${r}.svg`)}else F(i.toDataURL(at(t)),`${r}.${t}`)}}const pt=dt})(),ot.default})())}(vt)),vt.exports}var Lt=Rt();const Nt=It(Lt),Tt=Mt({__name:"QRCode",props:{type:{default:"svg"},shape:{},width:{default:300},height:{default:300},margin:{default:0},data:{default:""},image:{},nodeCanvas:{},jsdom:{},qrOptions:{default:()=>({typeNumber:0,mode:void 0,errorCorrectionLevel:"Q"})},imageOptions:{default:()=>({hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0})},dotsOptions:{default:()=>({type:"square",color:"#000"})},cornersSquareOptions:{},cornersDotOptions:{},backgroundOptions:{default:()=>({color:"rgba(0, 0, 0, 0)"})}},setup(gt){$t();const lt=gt,nt=new Nt(lt),J=Ot(null);return Dt(()=>{J.value&&nt.append(J.value)}),(T,ot)=>(At(),kt("div",{id:"qr-code",ref_key:"qrCodeRef",ref:J},null,512))}}),Gt={__name:"slides.md__slidev_46",setup(gt){const{$clicksContext:lt,$frontmatter:nt}=$t();return lt.setup(),(J,T)=>{const ot=Tt;return At(),zt(Et,Bt(Pt(Ct(qt)(Ct(nt),45))),{right:bt(R=>[T[0]||(T[0]=yt("h1",null,"Source code",-1)),xt(ot,{width:300,height:300,type:"svg",data:"https://github.com/asm0dey/bellsoft-docs-bot",margin:10,imageOptions:{margin:10},dotsOptions:{type:"extra-rounded",color:"white"}})]),default:bt(()=>[T[1]||(T[1]=yt("h1",null,"Blog",-1)),xt(ot,{width:300,height:300,type:"svg",data:"https://bit.ly/48WTkL5",margin:10,imageOptions:{margin:10},dotsOptions:{type:"extra-rounded",color:"white"}})]),_:1},16)}}};export{Gt as default};
